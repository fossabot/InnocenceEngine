// shadertype=glsl
#version 330 core

in vec2 TexCoords;
out vec4 FragColor;

uniform sampler2D uni_backgroundDPassRT0;

void main()
{  
	if(texture(uni_backgroundDPassRT0, TexCoords).a == 0.0)
	{
	FragColor = vec4(0.0, 0.0, 0.0, 1.0);
	}
	else
	{
	vec3 finalColor = texture(uni_backgroundDPassRT0, TexCoords).rgb;
	
	//HDR to LDR
	finalColor = finalColor / (finalColor + vec3(1.0));

	//gamma correction
	finalColor = pow(finalColor, vec3(1.0 / 2.2));
	
	FragColor = vec4(finalColor, 1.0);
	}
}
